@use 'sass:color';
@use 'sass:math';
@use 'sass:map';

$color-tertiary: hsl(337, 55%, 43%);
$spacer: 1.25rem;

@use '../../scss/spruce' with (
  $breakpoints: (
    md: 60em,
  ),
  $colors: (
    btn: (
      custom-background: hsl(0 0% 100%),
      custom-background-hover: hsl(332 49% 29%),
      custom-foreground: hsl(0 0% 0%),
      custom-foreground-hover: hsl(0 0% 100%),
      tertiary-background: $color-tertiary,
      tertiary-foreground: hsl(0 0% 100%),
      tertiary-shadow-focus: color.adjust($color-tertiary, $alpha: -0.75)
    ),
    form: (
      custom: hsl(0 100% 50%)
    )
  ),
  $container-width: 50rem,
  $settings: (
    color-fallback: true,
    hyphens: true,
    utilities: false
  ),
  $spacers: (
    xl: $spacer * 10rem
  ),
  $form-check-font-size-lg: 1.35rem
);

@include spruce.generate-content;
@include spruce.generate-form;

@include spruce.generate-color-variables(
  $colors: spruce.$colors,
  $selector: ':root[data-theme-mode="dark"]'
);

@include spruce.generate-form-check(
  '.wpcf7-list-item label',
  '.wpcf7-list-item input',
  '.wpcf7-list-item .wpcf7-list-item-label'
);

html[data-theme-mode='dark'] {
  select:not([multiple]):not([size]) {
    @include spruce.field-icon(
      spruce.$select-image,
      spruce.color(secondary, $only-color: true)
    );
  }
}

.btn--custom {
  @include spruce.btn-variant(custom);
  box-shadow: -3px 5px spruce.color(custom-foreground, btn);
  border: 3px solid spruce.color(custom-foreground, btn);
  border-radius: 0;
  font-family: spruce.$font-family-cursive;
}

.btn--tertiary {
  @include spruce.btn-variant(tertiary);
}

.clear-btn {
  @include spruce.clear-btn;
}

body {
  background-color: spruce.color(background);
}

.main {
  margin: 5rem 0;

  &__container {
    @include spruce.layout-center;
  }

  &__inner {
    > * + * {
      margin-top: 5rem;
    }
  }
}

.section {
  $this: &;

  &-subtitle {
    font-size: spruce.font-size(h5);
  }

  &__body {
    #{$this}-subtitle {
      margin-bottom: spruce.spacer(xs);
      margin-top: 0;

      &:not(:first-child) {
        margin-top: spruce.spacer(m);
      }
    }
  }

  &--color {
    #{$this}__body {
      @include spruce.layout-grid($minimum: 10rem);
    }
  }

  &--typography,
  &--media {
    #{$this}__body {
      @include spruce.layout-stack(
        spruce.spacer(m),
        $important: true
      );
    }
  }
}

.color-item {
  align-items: end;
  border-radius: spruce.$border-radius-lg;
  display: flex;
  height: 160px;
  overflow: hidden;

  &--bordered {
    box-shadow: 0 0 0 1px spruce.color(border) inset;
  }

  &__caption {
    background-color: #fff;
    border-radius: spruce.$border-radius-sm;
    font-size: 0.9rem;
    line-height: 1;
    margin: 0.5em;
    padding: 0.25em 0.5em;
  }
}

.ellipsis {
  @include spruce.text-ellipsis(3);
}

@each $name, $value in map.get(spruce.$colors, base) {
  .color-item--base-#{$name} {
    background-color: spruce.color($name, base);
  }
}

@each $name, $value in map.get(spruce.$colors, alert) {
  .color-item--alert-#{$name} {
    background-color: spruce.color($name, alert);
  }
}

@each $name, $value in map.get(spruce.$colors, btn) {
  .color-item--btn-#{$name} {
    background-color: spruce.color($name, btn);
  }
}

@each $name, $value in map.get(spruce.$colors, form) {
  .color-item--form-#{$name} {
    background-color: spruce.color($name, form);
  }
}

.scrollbar {
  @include spruce.scrollbar(
    $thumb-background-color: spruce.color(primary)
  );
  @include spruce.layout-stack;
  max-height: 15rem;
  overflow: auto;
}

.custom-heading-size {
  font-size: spruce.responsive-font-size(4rem, 30, 4vw);
}

.custom-link {
  transition: all var(--#{spruce.setting(prefix)}-transition-duration) var(--#{spruce.setting(prefix)}-transition-timing-function);

  &:hover {
    background-color: aqua;
  }
}

.cleared-list {
  @include spruce.clear-list;
}

.card {
  @include spruce.a11y-card-link('.card__link', true);
  border: 1px solid spruce.color(border);
  border-radius: spruce.$border-radius-lg;
  padding: spruce.spacer(m);

  &__link {
    color: spruce.color(heading);
    font-size: spruce.font-size(h3);
    font-weight: 700;
    text-decoration: none;
  }
}
