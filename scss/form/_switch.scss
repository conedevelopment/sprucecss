@use 'sass:map';
@use '../config' as *;
@use '../function' as *;
@use '../mixin' as *;

// Create custom checkbox and radio
@mixin generate-form-switch(
  $parent,
  $input,
  $label,
  $has-sizes: false
) {
  #{$parent} {
    align-items: center;
    display: inline-flex;
    gap: spacer(xs);

    &--block {
      justify-content: space-between;
      width: 100%;
    }
  }

  @if ($has-sizes) {
    #{$parent}--sm {
      #{$input} {
        font-size: $form-switch-font-size-sm;
      }
    }

    #{$parent}--lg {
      #{$input} {
        font-size: $form-switch-font-size-lg;
      }
    }
  }

  @at-root {
    #{$input} {
      @include field-icon($form-switch-icon, color(border, form, true));
      appearance: none;
      background-color: color(background, form);
      background-position: left center;
      background-repeat: no-repeat;
      background-size: contain;
      border: $form-switch-border-width solid color(border, form);
      border-radius: 2em;
      flex-shrink: 0;
      font-size: $form-switch-font-size;
      height: 1em;
      line-height: 1;
      margin-block-start: $form-switch-margin-block-start;
      transition-duration: transition(duration);
      transition-property: background-position border, box-shadow;
      transition-timing-function: transition(timing-function);
      width: 2em;

      &:focus-visible {
        @include field-focus(
          $type: 'outline',
          $border-color: color(border-focus, form),
          $ring-color: color(shadow-focus, form)
        );
      }

      &:checked {
        @include field-icon($form-switch-icon, color(check-foreground, form, true));
        background-color: color(check-background, form);
        background-position: right center;
        border-color: color(check-background, form);
      }

      &:disabled {
        @include field-disabled(
          $background: color(background-disabled, form),
          $border: color(border-disabled, form)
        );

        + #{$label} {
          opacity: 0.5;
        }
      }
    }

    [dir='rtl'] #{$input} {
      background-position: right center;

      &:checked {
        background-position: left center;
      }
    }

    #{$label} {
      font-weight: $form-switch-font-weight;
      line-height: $form-switch-line-height;
    }
  }
}
