@use '../variable' as *;
@use '../function' as *;
@use '../mixin' as *;

.form-check {
  $this: &;

  align-items: center;
  display: inline-flex;

  &--sm {
    #{$this}__control {
      font-size: $form-check-font-size-sm;
    }
  }

  &--lg {
    #{$this}__control {
      font-size: $form-check-font-size-lg;
    }
  }

  &__control {
    appearance: none;
    background-color: color(background, form);
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;
    border: $form-check-border-width solid color(border, form);
    flex-shrink: 0;
    font-size: $form-check-font-size;
    height: 1em;
    line-height: 1;
    margin-bottom: -0.1em;
    margin-inline-end: spacer(xs);
    transition: all var(--#{setting(prefix)}-transition-duration) var(--#{setting(prefix)}-transition-timing-function);
    width: 1em;

    &[type='radio'] {
      border-radius: 50%;
    }

    &[type='checkbox'] {
      border-radius: $border-radius-sm;
    }

    &:focus {
      @include field-focus(
        $border: color(border-focus, form),
        $box-shadow: color(shadow-focus, form)
      );
    }

    &:checked {
      background-color: color(check-background, form);
      border-color: color(check-background, form);

      &[type='radio'] {
        background-image: url('#{svg-escape($form-radio-image)}');
      }

      &[type='checkbox'] {
        background-image: url('#{svg-escape($form-checkbox-image)}');
      }
    }

    &:indeterminate {
      &[type='checkbox'] {
        background-color: color(check-background, form);
        background-image: url('#{svg-escape($form-checkbox-indeterminate-image)}');
        border-color: color(check-background, form);
      }
    }

    &:disabled {
      @include field-disabled(
        $background: color(background-disabled, form),
        $border: color(border-disabled, form)
      );

      + #{$this}__label {
        opacity: 0.5;
      }
    }
  }

  &__label {
    line-height: $line-height-heading;
  }
}
