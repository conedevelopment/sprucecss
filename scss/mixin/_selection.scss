@use 'sass:map';
@use '../function' as *;
@use '../config' as *;

// Set ::selection with automatic foreground color
@mixin selection(
  $background: primary,
  $foreground: null,
  $is-direct: false
) {
  $is-variable: false;
  $original-background: $background;

  @if map.has-key($colors, 'base', $background) {
    $background: color($background);
    $is-variable: true;
  }

  @if not $foreground and not $is-variable {
    $foreground: color-contrast($background);
  } @else if not $foreground and $is-variable {
    $foreground: color-contrast(color($original-background, $only-color: true));
  }

  @if $is-direct {
    &::selection {
      background-color: $background;
      color: $foreground;
    }
  } @else {
    ::selection {
      background-color: $background;
      color: $foreground;
    }
  }
}
