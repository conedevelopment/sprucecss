@use 'sass:color';
@use 'sass:math';
@use '../function' as *;
@use '../variable' as *;

// Hide something from the screen but keep it visible for assistive technology
@mixin visually-hidden() {
  border: 0 !important;
  clip: rect(0, 0, 0, 0) !important;
  height: 1px !important;
  margin: -1px !important;
  overflow: hidden !important;
  padding: 0 !important;
  position: absolute !important;
  white-space: nowrap !important;
  width: 1px !important;
}

// Crop text and display an ellipsis with multiline
@mixin text-ellipsis(
  $number-of-lines: 1
) {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  @supports (-webkit-line-clamp: $number-of-lines) {
    -webkit-box-orient: vertical;
    display: -webkit-box;
    -webkit-line-clamp: $number-of-lines;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: initial;
  }
}

// Custom aspect ratio generator
@mixin aspect-ratio(
  $width,
  $height,
  $descendant-element
) {
  position: relative;

  &::before {
    content: '';
    display: block;
    padding-top: math.div($height, $width) * 100%;
    width: 100%;
  }

  > #{$descendant-element} {
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
}

// Custom scrollbar
@mixin scrollbar(
  $thumb-background-color: hsla(0, 0%, 0%, 0.15),
  $thumb-background-color-hover: hsla(0, 0%, 0%, 0.25),
  $track-background-color: hsla(0, 0%, 0%, 0.05),
  $size: 0.5rem,
  $border-radius: $border-radius-sm
) {
  &::-webkit-scrollbar {
    height: $size;
    width: $size;
  }

  &::-webkit-scrollbar-thumb {
    background: $thumb-background-color;
    border-radius: $border-radius;

    &:hover {
      background: $thumb-background-color-hover;
    }
  }

  &::-webkit-scrollbar-track {
    background: $track-background-color;
    border-radius: $border-radius;
  }
}

// Clear default button styles
@mixin clear-btn() {
  background: none;
  border: 0;
  color: inherit;
  cursor: pointer;
  font: inherit;
  outline: inherit;
  padding: 0;
}

// Clear list styles
@mixin clear-list() {
  list-style: none;
  margin: 0;
  padding: 0;
}

// More accessible card linking
@mixin a11y-card-link($link, $at-root: false) {
  position: relative;

  @if $at-root == true {
    @at-root {
      #{$link}::before {
        content: '';
        inset: 0;
        position: absolute;
      }
    }
  } @else {
    #{$link}::before {
      content: '';
      inset: 0;
      position: absolute;
    }
  }
}
