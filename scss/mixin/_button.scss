@use 'sass:color';
@use 'sass:map';
@use '../function' as *;
@use '../variable' as *;

@mixin btn-focus(
  $box-shadow
) {
  box-shadow: 0 0 0 $btn-shadow-width $box-shadow;
  outline: 2px solid transparent;
}

@mixin btn-variant(
  $type: primary
) {
  @if not map.has-key($colors, btn, $type + '-foreground') or not map.has-key($colors, btn, $type + '-background') {
    @error 'The #{$type + '-foreground'} or #{$type + '-background'} key name doesn\'t exist under btn at the $colors map.';
  }

  background-color: color($type + '-background', btn);
  color: color($type + '-foreground', btn);

  &:hover {
    @if map.has-key($colors, btn, $type + '-foreground-hover') {
      background-color: color($type + '-background-hover', btn);
    } @else {
      background-color: color.adjust(color($type + '-background', btn, true), $lightness: -20%);
    }

    @if map.has-key($colors, btn, $type + '-foreground-hover') {
      color: color($type + '-foreground-hover', btn);
    } @else {
      color: color($type + '-foreground', btn);
    }
  }

  &:focus {
    @if map.has-key($colors, btn, $type + '-shadow-focus') {
      @include btn-focus(color($type + '-shadow-focus', btn));
    } @else {
      @include btn-focus(color.adjust(color($type + '-background', btn, true), $alpha: -0.75));
    }
  }
}
