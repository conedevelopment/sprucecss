@use 'sass:map';
@use 'sass:string';
@use '../config' as *;

@mixin generate-variables($map, $exclude: null) {
  @if map.get($settings, 'css-custom-properties') {
    $excludeMap: $map;

    @if $exclude {
      @each $key, $value in $map {
        @if $value {
          @each $fraction in $exclude {
            @if string.index($key, $fraction) {
              $excludeMap: map.remove($excludeMap, $key);
            }
          }
        }
      }
    }

    @if $exclude {
      @each $key, $value in $excludeMap {
        @if $value {
          --#{$internal-prefix}#{$key}: #{$value};
        }
      }
    }

    @if not $exclude {
      @each $key, $value in $map {
        @if $value {
          --#{$internal-prefix}#{$key}: #{$value};
        }
      }
    }
  }
}
